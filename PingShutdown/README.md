# PingShutdown

## 🕵️‍♂️ 功能  

检测IP是否能够PING通，如PING超时代表可能断电，将执行关机操作保护NAS。  
> PS：可能会影响NAS休眠  

## ✋ 情景

> 在我正为家中有UPS高兴时（可以识别UPS使用断电自动关机功能），打开NAS识别才意识到这UPS根本不支持识别（贫穷.唔……），既然本机不能自动处理，那么我们可以通过内网识别其他设备进行处理达到我们想要的结果。

我这里是PING路由器WIFI设备（长期开机）内网地址（如192.168.1.1），如果PING超时代表可能断电，将执行关机操作，为防止短时间的断网或断电，可以在代码中设置一个合理的判断时间值（推荐UPS能够坚持的时间内）。  
  
结合思路整理如下进行食用。

## 🎈 条件

> 任意UPS  
> WIFI路由器 / 长期开机使用接入网络的设备

## 🍴 食用

1、打开NAS任务计划  
2、新增计划任务-用户定义的脚本  
3、选择计划运行时间（推荐在UPS能够坚持的范围内，我这里是每5分钟运行一次），然后再将代码拷贝进入。  
4、根据代码中的注释进行配置（设置）  

## 🚲 测试  

可将PING判断设备（WIFI路由器）断电，等待任务执行时间结束，查看是否自动关机。